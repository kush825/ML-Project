{% extends "base.html" %}

{% block title %}Analytics | CardioSense AI{% endblock %}

{% block content %}
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <span class="eyebrow floating"><i class="fa-solid fa-chart-column"></i> Diagnostic Intelligence</span>
            <h1 class="fw-bold mb-3">Model Validation <span class="gradient-text">Dashboard</span></h1>
            <p class="text-secondary">Comprehensive analytical breakdown of model behavior and feature correlations.</p>
        </div>

        <ul class="nav nav-pills justify-content-center ui-pills mb-5" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="pills-model-tab" data-bs-toggle="pill" data-bs-target="#pills-model"
                    type="button">Performance Metrics</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pills-data-tab" data-bs-toggle="pill" data-bs-target="#pills-data"
                    type="button">Data Distributions</button>
            </li>
        </ul>

        <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-model">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <article class="plot-card">
                            <h5 class="d-flex align-items-center gap-2">
                                <i class="fa-solid fa-table-cells text-accent"></i> Confusion Matrix
                            </h5>
                            <img src="{{ url_for('static', filename='plots/confusion_matrix.png') }}"
                                class="img-fluid rounded w-100" alt="Confusion Matrix"
                                onerror="this.src='https://via.placeholder.com/600x400?text=Plot+Not+Found';">
                            <p>Evaluates prediction accuracy by comparing predicted vs. actual clinical outcomes.</p>
                        </article>
                    </div>
                    <div class="col-lg-6">
                        <article class="plot-card">
                            <h5 class="d-flex align-items-center gap-2">
                                <i class="fa-solid fa-list-check text-accent"></i> Feature Importance
                            </h5>
                            <img src="{{ url_for('static', filename='plots/feature_importance.png') }}"
                                class="img-fluid rounded w-100" alt="Feature Importance"
                                onerror="this.src='https://via.placeholder.com/600x400?text=Plot+Not+Found';">
                            <p>Identifies health parameters with the strongest predictive weight in the ensemble.</p>
                        </article>
                    </div>
                    <div class="col-lg-6">
                        <article class="plot-card">
                            <h5 class="d-flex align-items-center gap-2">
                                <i class="fa-solid fa-wave-square text-accent"></i> ROC Curve
                            </h5>
                            <img src="{{ url_for('static', filename='plots/roc_curve.png') }}"
                                class="img-fluid rounded w-100" alt="ROC Curve"
                                onerror="this.src='https://via.placeholder.com/600x400?text=Plot+Not+Found';">
                            <p>Visualizes the classifier sensitivity and specificity across varying thresholds.</p>
                        </article>
                    </div>
                    <div class="col-lg-6">
                        <article class="plot-card">
                            <h5 class="d-flex align-items-center gap-2">
                                <i class="fa-solid fa-arrow-trend-up text-accent"></i> Learning Curve
                            </h5>
                            <img src="{{ url_for('static', filename='plots/learning_curve.png') }}"
                                class="img-fluid rounded w-100" alt="Learning Curve"
                                onerror="this.src='https://via.placeholder.com/600x400?text=Plot+Not+Found';">
                            <p>Shows how model performance matures as it processes higher training sample volumes.</p>
                        </article>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade" id="pills-data">
                <div class="row g-4 justify-content-center">
                    <div class="col-lg-8">
                        <article class="plot-card">
                            <h5 class="d-flex align-items-center gap-2">
                                <i class="fa-solid fa-users-line text-accent"></i> Age Correlation
                            </h5>
                            <img src="{{ url_for('static', filename='plots/age_dist.png') }}"
                                class="img-fluid rounded w-100" alt="Age Distribution"
                                onerror="this.src='https://via.placeholder.com/600x400?text=Plot+Not+Found';">
                            <p>Demographic mapping of cardiovascular risk incidence across age groups.</p>
                        </article>
                    </div>
                    <div class="col-lg-8">
                        <article class="plot-card">
                            <h5 class="d-flex align-items-center gap-2">
                                <i class="fa-solid fa-gauge-high text-accent"></i> Confidence Thresholds
                            </h5>
                            <img src="{{ url_for('static', filename='plots/prob_dist.png') }}"
                                class="img-fluid rounded w-100" alt="Probability Distribution"
                                onerror="this.src='https://via.placeholder.com/600x400?text=Plot+Not+Found';">
                            <p>Distribution of predictive confidence scores generated by the Random Forest classifier.
                            </p>
                        </article>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}